<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/backend/layers/telemetry/main.ts">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/backend/layers/telemetry/main.ts" />
              <option name="originalContent" value="import { Logger } from '@aws-lambda-powertools/logger';&#10;import { injectLambdaContext } from '@aws-lambda-powertools/logger/middleware';&#10;import { Metrics } from '@aws-lambda-powertools/metrics';&#10;import { logMetrics } from '@aws-lambda-powertools/metrics/middleware';&#10;import { Tracer } from '@aws-lambda-powertools/tracer';&#10;import { captureLambdaHandler } from '@aws-lambda-powertools/tracer/middleware';&#10;&#10;&#10;import type { TelemetryTools } from './TelemetryTools';&#10;&#10;/**&#10; * Get instances of all the _telemetry tools we use.&#10; * @param serviceName Service name of Telemetry&#10; * @param namespace Namespace of Telemetry&#10; */&#10;export const getTelemetryTools = (serviceName: string, namespace: string): TelemetryTools =&gt; {&#10;    const tracer = new Tracer({ serviceName });&#10;    const logger = new Logger({ serviceName, logLevel: getLogLevel() });&#10;    const metrics = new Metrics({ serviceName, namespace });&#10;&#10;    return { tracer, logger, metrics };&#10;};&#10;&#10;/**&#10; * Returns an array of the default Middy middlewares that we use.&#10; */&#10;export const telemetryMiddleware = ({ logger, tracer, metrics }: TelemetryTools) =&gt; {&#10;    return [&#10;        captureLambdaHandler(tracer),&#10;        injectLambdaContext(logger),&#10;        logMetrics(metrics, { captureColdStartMetric: true }),&#10;    ];&#10;};&#10;&#10;const getLogLevel = () =&gt; {&#10;    if (NodeEnv.isDevelopment()) {&#10;        return 'DEBUG';&#10;    }&#10;    if (NodeEnv.isProduction()) {&#10;        return 'INFO';&#10;    }&#10;&#10;    if (NodeEnv.isQa()) {&#10;        return 'DEBUG';&#10;    }&#10;&#10;&#10;    return 'INFO';&#10;};&#10;" />
              <option name="updatedContent" value="import { Logger } from '@aws-lambda-powertools/logger';&#10;import { injectLambdaContext } from '@aws-lambda-powertools/logger/middleware';&#10;import { Metrics } from '@aws-lambda-powertools/metrics';&#10;import { logMetrics } from '@aws-lambda-powertools/metrics/middleware';&#10;import { Tracer } from '@aws-lambda-powertools/tracer';&#10;import { captureLambdaHandler } from '@aws-lambda-powertools/tracer/middleware';&#10;&#10;&#10;import type { TelemetryTools } from './TelemetryTools';&#10;&#10;/**&#10; * Get instances of all the _telemetry tools we use.&#10; * @param serviceName Service name of Telemetry&#10; * @param namespace Namespace of Telemetry&#10; */&#10;export const getTelemetryTools = (serviceName: string, namespace: string): TelemetryTools =&gt; {&#10;    const tracer = new Tracer({ serviceName });&#10;    const logger = new Logger({ serviceName, logLevel: getLogLevel() });&#10;    const metrics = new Metrics({ serviceName, namespace });&#10;&#10;    return { tracer, logger, metrics };&#10;};&#10;&#10;/**&#10; * Returns an array of the default Middy middlewares that we use.&#10; */&#10;export const telemetryMiddleware = ({ logger, tracer, metrics }: TelemetryTools) =&gt; {&#10;    return [&#10;        captureLambdaHandler(tracer),&#10;        injectLambdaContext(logger),&#10;        logMetrics(metrics, { captureColdStartMetric: true }),&#10;    ];&#10;};&#10;&#10;const getLogLevel = () =&gt; {&#10;    if (NodeEnv.isDevelopment()) {&#10;        return 'DEBUG';&#10;    }&#10;    if (NodeEnv.isProduction()) {&#10;        return 'INFO';&#10;    }&#10;&#10;    if (NodeEnv.isQa()) {&#10;        return 'DEBUG';&#10;    }&#10;&#10;&#10;    return 'INFO';&#10;};&#10;&#10;// Export getLogLevel if needed externally&#10;export { getLogLevel };&#10;&#10;// No Lambda handler code here; only utilities for use in Lambda functions" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/front-end/check-env.sh">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/front-end/check-env.sh" />
              <option name="updatedContent" value="#!/bin/bash&#10;&#10;echo &quot; Checking environment configuration...&quot;&#10;echo &quot;&quot;&#10;&#10;# Check if .env.local exists&#10;if [ ! -f .env.local ]; then&#10;    echo &quot;❌ .env.local file not found!&quot;&#10;    echo &quot;Run: ./generate-env.sh to create it&quot;&#10;    exit 1&#10;fi&#10;&#10;echo &quot;✅ .env.local file exists&quot;&#10;echo &quot;&quot;&#10;echo &quot;Environment variables:&quot;&#10;echo &quot;---&quot;&#10;&#10;# Source and display env vars&#10;source .env.local 2&gt;/dev/null || true&#10;&#10;vars=(&#10;    &quot;NEXT_PUBLIC_COGNITO_USER_POOL_ID&quot;&#10;    &quot;NEXT_PUBLIC_COGNITO_CLIENT_ID&quot;&#10;    &quot;NEXT_PUBLIC_COGNITO_REGION&quot;&#10;    &quot;NEXT_PUBLIC_API_GATEWAY_URL&quot;&#10;)&#10;&#10;all_set=true&#10;for var in &quot;${vars[@]}&quot;; do&#10;    value=&quot;${!var}&quot;&#10;    if [ -z &quot;$value&quot; ]; then&#10;        echo &quot;❌ $var: NOT SET&quot;&#10;        all_set=false&#10;    else&#10;        # Mask the value for security&#10;        masked=&quot;${value:0:4}...${value: -4}&quot;&#10;        echo &quot;✅ $var: $masked&quot;&#10;    fi&#10;done&#10;&#10;echo &quot;&quot;&#10;if [ &quot;$all_set&quot; = true ]; then&#10;    echo &quot;✅ All environment variables are configured correctly!&quot;&#10;    echo &quot;&quot;&#10;    echo &quot;You can now run: npm run dev&quot;&#10;else&#10;    echo &quot;❌ Some environment variables are missing!&quot;&#10;    echo &quot;Run: ./generate-env.sh to regenerate .env.local&quot;&#10;fi&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/front-end/src/app/auth/forgot-password/page.tsx">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/front-end/src/app/auth/forgot-password/page.tsx" />
              <option name="updatedContent" value="'use client';&#10;&#10;import { useState } from 'react';&#10;import { useRouter } from 'next/navigation';&#10;import ForgotPasswordForm from '@/components/auth/ForgotPasswordForm';&#10;import ResetPasswordForm from '@/components/auth/ResetPasswordForm';&#10;&#10;export default function ForgotPasswordPage() {&#10;  const [step, setStep] = useState&lt;'request' | 'reset'&gt;('request');&#10;  const [email, setEmail] = useState('');&#10;  const router = useRouter();&#10;&#10;  const handleRequestSuccess = (userEmail: string) =&gt; {&#10;    setEmail(userEmail);&#10;    setStep('reset');&#10;  };&#10;&#10;  const handleResetSuccess = () =&gt; {&#10;    router.push('/auth/login?message=Password reset successfully');&#10;  };&#10;&#10;  return (&#10;    &lt;div className=&quot;min-h-screen bg-gray-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8&quot;&gt;&#10;      {step === 'request' ? (&#10;        &lt;ForgotPasswordForm onSuccess={handleRequestSuccess} /&gt;&#10;      ) : (&#10;        &lt;ResetPasswordForm email={email} onSuccess={handleResetSuccess} /&gt;&#10;      )}&#10;    &lt;/div&gt;&#10;  );&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/front-end/src/app/auth/register/page.tsx">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/front-end/src/app/auth/register/page.tsx" />
              <option name="updatedContent" value="'use client';&#10;&#10;import { useState } from 'react';&#10;import { useRouter } from 'next/navigation';&#10;import RegisterForm from '@/components/auth/RegisterForm';&#10;import ConfirmSignUpForm from '@/components/auth/ConfirmSignUpForm';&#10;&#10;export default function RegisterPage() {&#10;  const [step, setStep] = useState&lt;'register' | 'confirm'&gt;('register');&#10;  const [email, setEmail] = useState('');&#10;  const router = useRouter();&#10;&#10;  const handleRegisterSuccess = (userEmail: string) =&gt; {&#10;    setEmail(userEmail);&#10;    setStep('confirm');&#10;  };&#10;&#10;  const handleConfirmSuccess = () =&gt; {&#10;    router.push('/auth/login?message=Account confirmed successfully');&#10;  };&#10;&#10;  return (&#10;    &lt;div className=&quot;min-h-screen bg-gray-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8&quot;&gt;&#10;      {step === 'register' ? (&#10;        &lt;RegisterForm onSuccess={handleRegisterSuccess} /&gt;&#10;      ) : (&#10;        &lt;ConfirmSignUpForm email={email} onSuccess={handleConfirmSuccess} /&gt;&#10;      )}&#10;    &lt;/div&gt;&#10;  );&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/front-end/src/app/layout.tsx">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/front-end/src/app/layout.tsx" />
              <option name="originalContent" value="import type { Metadata } from &quot;next&quot;;&#10;import { Geist, Geist_Mono } from &quot;next/font/google&quot;;&#10;import &quot;./globals.css&quot;;&#10;&#10;const geistSans = Geist({&#10;  variable: &quot;--font-geist-sans&quot;,&#10;  subsets: [&quot;latin&quot;],&#10;});&#10;&#10;const geistMono = Geist_Mono({&#10;  variable: &quot;--font-geist-mono&quot;,&#10;  subsets: [&quot;latin&quot;],&#10;});&#10;&#10;export const metadata: Metadata = {&#10;  title: &quot;Create Next App&quot;,&#10;  description: &quot;Generated by create next app&quot;,&#10;};&#10;&#10;export default function RootLayout({&#10;  children,&#10;}: Readonly&lt;{&#10;  children: React.ReactNode;&#10;}&gt;) {&#10;  return (&#10;    &lt;html lang=&quot;en&quot;&gt;&#10;      &lt;body&#10;        className={`${geistSans.variable} ${geistMono.variable} antialiased`}&#10;      &gt;&#10;        {children}&#10;      &lt;/body&gt;&#10;    &lt;/html&gt;&#10;  );&#10;}&#10;" />
              <option name="updatedContent" value="import type { Metadata } from &quot;next&quot;;&#10;import { Geist, Geist_Mono } from &quot;next/font/google&quot;;&#10;import &quot;./globals.css&quot;;&#10;import { AuthProvider } from &quot;@/contexts/AuthContext&quot;;&#10;&#10;const geistSans = Geist({&#10;  variable: &quot;--font-geist-sans&quot;,&#10;  subsets: [&quot;latin&quot;],&#10;});&#10;&#10;const geistMono = Geist_Mono({&#10;  variable: &quot;--font-geist-mono&quot;,&#10;  subsets: [&quot;latin&quot;],&#10;});&#10;&#10;export const metadata: Metadata = {&#10;  title: &quot;Todo App&quot;,&#10;  description: &quot;Modern todo application with authentication&quot;,&#10;};&#10;&#10;export default function RootLayout({&#10;  children,&#10;}: Readonly&lt;{&#10;  children: React.ReactNode;&#10;}&gt;) {&#10;  return (&#10;    &lt;html lang=&quot;en&quot;&gt;&#10;      &lt;body&#10;        className={`${geistSans.variable} ${geistMono.variable} antialiased`}&#10;      &gt;&#10;        &lt;AuthProvider&gt;&#10;          {children}&#10;        &lt;/AuthProvider&gt;&#10;      &lt;/body&gt;&#10;    &lt;/html&gt;&#10;  );&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/front-end/src/components/auth/ConfirmSignUpForm.tsx">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/front-end/src/components/auth/ConfirmSignUpForm.tsx" />
              <option name="updatedContent" value="'use client';&#10;&#10;import React from 'react';&#10;import Link from 'next/link';&#10;import { useForm } from 'react-hook-form';&#10;import { zodResolver } from '@hookform/resolvers/zod';&#10;import { Hash, AlertCircle, Mail, CheckCircle } from 'lucide-react';&#10;import { confirmSignUpSchema, ConfirmSignUpFormData } from '@/lib/validation';&#10;import { useAuthActions } from '@/hooks/useAuthActions';&#10;&#10;interface ConfirmSignUpFormProps {&#10;  email?: string;&#10;  onSuccess?: () =&gt; void;&#10;}&#10;&#10;export default function ConfirmSignUpForm({ email, onSuccess }: ConfirmSignUpFormProps) {&#10;  const { handleConfirmSignUp, loading, error, clearError } = useAuthActions();&#10;&#10;  const {&#10;    register,&#10;    handleSubmit,&#10;    formState: { errors, isSubmitting },&#10;  } = useForm&lt;ConfirmSignUpFormData&gt;({&#10;    resolver: zodResolver(confirmSignUpSchema),&#10;    defaultValues: {&#10;      email: email || '',&#10;    },&#10;  });&#10;&#10;  const onSubmit = async (data: ConfirmSignUpFormData) =&gt; {&#10;    clearError();&#10;    const success = await handleConfirmSignUp(data.email, data.code);&#10;    if (success &amp;&amp; onSuccess) {&#10;      onSuccess();&#10;    }&#10;  };&#10;&#10;  return (&#10;    &lt;div className=&quot;w-full max-w-md mx-auto&quot;&gt;&#10;      &lt;div className=&quot;bg-white shadow-xl rounded-lg p-8&quot;&gt;&#10;        &lt;div className=&quot;text-center mb-8&quot;&gt;&#10;          &lt;div className=&quot;mx-auto w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mb-4&quot;&gt;&#10;            &lt;Mail className=&quot;h-8 w-8 text-blue-600&quot; /&gt;&#10;          &lt;/div&gt;&#10;          &lt;h1 className=&quot;text-3xl font-bold text-gray-900&quot;&gt;Verify Your Email&lt;/h1&gt;&#10;          &lt;p className=&quot;text-gray-600 mt-2&quot;&gt;&#10;            We've sent a verification code to {email || 'your email'}&#10;          &lt;/p&gt;&#10;        &lt;/div&gt;&#10;&#10;        {error &amp;&amp; (&#10;          &lt;div className=&quot;mb-6 p-4 bg-red-50 border border-red-200 rounded-lg flex items-center gap-3&quot;&gt;&#10;            &lt;AlertCircle className=&quot;h-5 w-5 text-red-500 flex-shrink-0&quot; /&gt;&#10;            &lt;div className=&quot;text-sm text-red-700&quot;&gt;&#10;              &lt;p className=&quot;font-medium&quot;&gt;Verification failed&lt;/p&gt;&#10;              &lt;p&gt;{error.message}&lt;/p&gt;&#10;            &lt;/div&gt;&#10;          &lt;/div&gt;&#10;        )}&#10;&#10;        &lt;form onSubmit={handleSubmit(onSubmit)} className=&quot;space-y-6&quot;&gt;&#10;          {!email &amp;&amp; (&#10;            &lt;div&gt;&#10;              &lt;label htmlFor=&quot;email&quot; className=&quot;block text-sm font-medium text-gray-700 mb-2&quot;&gt;&#10;                Email Address&#10;              &lt;/label&gt;&#10;              &lt;div className=&quot;relative&quot;&gt;&#10;                &lt;div className=&quot;absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none&quot;&gt;&#10;                  &lt;Mail className=&quot;h-5 w-5 text-gray-400&quot; /&gt;&#10;                &lt;/div&gt;&#10;                &lt;input&#10;                  {...register('email')}&#10;                  type=&quot;email&quot;&#10;                  className=&quot;block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent&quot;&#10;                  placeholder=&quot;Enter your email&quot;&#10;                /&gt;&#10;              &lt;/div&gt;&#10;              {errors.email &amp;&amp; (&#10;                &lt;p className=&quot;mt-1 text-sm text-red-600&quot;&gt;{errors.email.message}&lt;/p&gt;&#10;              )}&#10;            &lt;/div&gt;&#10;          )}&#10;&#10;          &lt;div&gt;&#10;            &lt;label htmlFor=&quot;code&quot; className=&quot;block text-sm font-medium text-gray-700 mb-2&quot;&gt;&#10;              Verification Code&#10;            &lt;/label&gt;&#10;            &lt;div className=&quot;relative&quot;&gt;&#10;              &lt;div className=&quot;absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none&quot;&gt;&#10;                &lt;Hash className=&quot;h-5 w-5 text-gray-400&quot; /&gt;&#10;              &lt;/div&gt;&#10;              &lt;input&#10;                {...register('code')}&#10;                type=&quot;text&quot;&#10;                maxLength={6}&#10;                className=&quot;block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-center text-lg tracking-widest&quot;&#10;                placeholder=&quot;000000&quot;&#10;              /&gt;&#10;            &lt;/div&gt;&#10;            {errors.code &amp;&amp; (&#10;              &lt;p className=&quot;mt-1 text-sm text-red-600&quot;&gt;{errors.code.message}&lt;/p&gt;&#10;            )}&#10;          &lt;/div&gt;&#10;&#10;          &lt;button&#10;            type=&quot;submit&quot;&#10;            disabled={loading || isSubmitting}&#10;            className=&quot;w-full bg-blue-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors&quot;&#10;          &gt;&#10;            {loading || isSubmitting ? 'Verifying...' : 'Verify Email'}&#10;          &lt;/button&gt;&#10;        &lt;/form&gt;&#10;&#10;        &lt;div className=&quot;mt-8 text-center space-y-4&quot;&gt;&#10;          &lt;p className=&quot;text-sm text-gray-600&quot;&gt;&#10;            Didn't receive the code?{' '}&#10;            &lt;button&#10;              type=&quot;button&quot;&#10;              className=&quot;text-blue-600 hover:text-blue-500 font-medium&quot;&#10;            &gt;&#10;              Resend Code&#10;            &lt;/button&gt;&#10;          &lt;/p&gt;&#10;          &#10;          &lt;Link&#10;            href=&quot;/auth/register&quot;&#10;            className=&quot;block text-sm text-blue-600 hover:text-blue-500 font-medium&quot;&#10;          &gt;&#10;            Use different email&#10;          &lt;/Link&gt;&#10;        &lt;/div&gt;&#10;      &lt;/div&gt;&#10;    &lt;/div&gt;&#10;  );&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/front-end/src/contexts/AuthContext.tsx">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/front-end/src/contexts/AuthContext.tsx" />
              <option name="originalContent" value="'use client';&#10;&#10;import React, { createContext, useContext, useEffect, useState } from 'react';&#10;import { getCurrentUser, signOut } from 'aws-amplify/auth';&#10;import { User, AuthState } from '@/types/auth';&#10;import { configureAmplify } from '@/lib/amplify-config';&#10;&#10;interface AuthContextType extends AuthState {&#10;  signOut: () =&gt; Promise&lt;void&gt;;&#10;  refreshAuth: () =&gt; Promise&lt;void&gt;;&#10;}&#10;&#10;const AuthContext = createContext&lt;AuthContextType | undefined&gt;(undefined);&#10;&#10;export function AuthProvider({ children }: { children: React.ReactNode }) {&#10;  const [state, setState] = useState&lt;AuthState&gt;({&#10;    user: null,&#10;    loading: true,&#10;    isAuthenticated: false,&#10;  });&#10;&#10;  const checkAuthState = async () =&gt; {&#10;    try {&#10;      const user = await getCurrentUser();&#10;      const userAttributes = user.signInDetails?.loginId;&#10;&#10;      const userData: User = {&#10;        id: user.userId,&#10;        email: userAttributes || '',&#10;        username: user.username,&#10;        emailVerified: true, // Assume verified if user is signed in&#10;      };&#10;&#10;      setState({&#10;        user: userData,&#10;        loading: false,&#10;        isAuthenticated: true,&#10;      });&#10;    } catch (error) {&#10;      setState({&#10;        user: null,&#10;        loading: false,&#10;        isAuthenticated: false,&#10;      });&#10;    }&#10;  };&#10;&#10;  const handleSignOut = async () =&gt; {&#10;    try {&#10;      await signOut();&#10;      setState({&#10;        user: null,&#10;        loading: false,&#10;        isAuthenticated: false,&#10;      });&#10;    } catch (error) {&#10;      console.error('Error signing out:', error);&#10;    }&#10;  };&#10;&#10;  const refreshAuth = async () =&gt; {&#10;    setState(prev =&gt; ({ ...prev, loading: true }));&#10;    await checkAuthState();&#10;  };&#10;&#10;  useEffect(() =&gt; {&#10;    configureAmplify();&#10;    checkAuthState();&#10;  }, []);&#10;&#10;  const value: AuthContextType = {&#10;    ...state,&#10;    signOut: handleSignOut,&#10;    refreshAuth,&#10;  };&#10;&#10;  return (&#10;    &lt;AuthContext.Provider value={value}&gt;&#10;      {children}&#10;    &lt;/AuthContext.Provider&gt;&#10;  );&#10;}&#10;&#10;export function useAuth() {&#10;  const context = useContext(AuthContext);&#10;  if (context === undefined) {&#10;    throw new Error('useAuth must be used within an AuthProvider');&#10;  }&#10;  return context;&#10;}&#10;" />
              <option name="updatedContent" value="'use client';&#10;&#10;import React, { createContext, useContext, useEffect, useState } from 'react';&#10;import { getCurrentUser, signOut } from 'aws-amplify/auth';&#10;import { User, AuthState } from '@/types/auth';&#10;import { configureAmplify } from '@/lib/amplify-config';&#10;&#10;interface AuthContextType extends AuthState {&#10;  signOut: () =&gt; Promise&lt;void&gt;;&#10;  refreshAuth: () =&gt; Promise&lt;void&gt;;&#10;}&#10;&#10;const AuthContext = createContext&lt;AuthContextType | undefined&gt;(undefined);&#10;&#10;export function AuthProvider({ children }: { children: React.ReactNode }) {&#10;  const [state, setState] = useState&lt;AuthState&gt;({&#10;    user: null,&#10;    loading: true,&#10;    isAuthenticated: false,&#10;  });&#10;  const [isConfigured, setIsConfigured] = useState(false);&#10;&#10;  useEffect(() =&gt; {&#10;    // Configure Amplify once on mount&#10;    try {&#10;      configureAmplify();&#10;      setIsConfigured(true);&#10;    } catch (error) {&#10;      console.error('Failed to configure Amplify:', error);&#10;      setState({&#10;        user: null,&#10;        loading: false,&#10;        isAuthenticated: false,&#10;      });&#10;    }&#10;  }, []);&#10;&#10;  const checkAuthState = async () =&gt; {&#10;    if (!isConfigured) {&#10;      console.log('Amplify not yet configured, skipping auth check');&#10;      return;&#10;    }&#10;&#10;    try {&#10;      const user = await getCurrentUser();&#10;      const userAttributes = user.signInDetails?.loginId;&#10;&#10;      const userData: User = {&#10;        id: user.userId,&#10;        email: userAttributes || '',&#10;        username: user.username,&#10;        emailVerified: true, // Assume verified if user is signed in&#10;      };&#10;&#10;      setState({&#10;        user: userData,&#10;        loading: false,&#10;        isAuthenticated: true,&#10;      });&#10;    } catch (error) {&#10;      setState({&#10;        user: null,&#10;        loading: false,&#10;        isAuthenticated: false,&#10;      });&#10;    }&#10;  };&#10;&#10;  useEffect(() =&gt; {&#10;    if (isConfigured) {&#10;      checkAuthState();&#10;    }&#10;    // eslint-disable-next-line react-hooks/exhaustive-deps&#10;  }, [isConfigured]);&#10;&#10;  const handleSignOut = async () =&gt; {&#10;    try {&#10;      await signOut();&#10;      setState({&#10;        user: null,&#10;        loading: false,&#10;        isAuthenticated: false,&#10;      });&#10;    } catch (error) {&#10;      console.error('Error signing out:', error);&#10;    }&#10;  };&#10;&#10;  const refreshAuth = async () =&gt; {&#10;    setState(prev =&gt; ({ ...prev, loading: true }));&#10;    await checkAuthState();&#10;  };&#10;&#10;  const value: AuthContextType = {&#10;    ...state,&#10;    signOut: handleSignOut,&#10;    refreshAuth,&#10;  };&#10;&#10;  return (&#10;    &lt;AuthContext.Provider value={value}&gt;&#10;      {children}&#10;    &lt;/AuthContext.Provider&gt;&#10;  );&#10;}&#10;&#10;export function useAuth() {&#10;  const context = useContext(AuthContext);&#10;  if (context === undefined) {&#10;    throw new Error('useAuth must be used within an AuthProvider');&#10;  }&#10;  return context;&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/front-end/src/lib/amplify-config.ts">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/front-end/src/lib/amplify-config.ts" />
              <option name="originalContent" value="import { Amplify } from 'aws-amplify';&#10;&#10;const amplifyConfig = {&#10;  Auth: {&#10;    Cognito: {&#10;      userPoolId: process.env.NEXT_PUBLIC_COGNITO_USER_POOL_ID!,&#10;      userPoolClientId: process.env.NEXT_PUBLIC_COGNITO_CLIENT_ID!,&#10;      region: process.env.NEXT_PUBLIC_COGNITO_REGION!,&#10;      signUpVerificationMethod: 'code' as const,&#10;      loginWith: {&#10;        email: true,&#10;      },&#10;    },&#10;  },&#10;};&#10;&#10;export function configureAmplify() {&#10;  try {&#10;    Amplify.configure(amplifyConfig, { ssr: true });&#10;  } catch (error) {&#10;    console.error('Error configuring Amplify:', error);&#10;  }&#10;}&#10;&#10;export default amplifyConfig;&#10;" />
              <option name="updatedContent" value="import { Amplify } from 'aws-amplify';&#10;import { checkEnvVariables } from './env-check';&#10;&#10;const amplifyConfig = {&#10;  Auth: {&#10;    Cognito: {&#10;      userPoolId: process.env.NEXT_PUBLIC_COGNITO_USER_POOL_ID!,&#10;      userPoolClientId: process.env.NEXT_PUBLIC_COGNITO_CLIENT_ID!,&#10;      region: process.env.NEXT_PUBLIC_COGNITO_REGION!,&#10;      signUpVerificationMethod: 'code' as const,&#10;      loginWith: {&#10;        email: true,&#10;      },&#10;    },&#10;  },&#10;};&#10;&#10;export function configureAmplify() {&#10;  try {&#10;    // Check if environment variables are set&#10;    if (!checkEnvVariables()) {&#10;      throw new Error('Missing required environment variables');&#10;    }&#10;    &#10;    Amplify.configure(amplifyConfig, { ssr: true });&#10;    console.log('✅ Amplify configured successfully');&#10;  } catch (error) {&#10;    console.error('❌ Error configuring Amplify:', error);&#10;    throw error;&#10;  }&#10;}&#10;&#10;export default amplifyConfig;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>