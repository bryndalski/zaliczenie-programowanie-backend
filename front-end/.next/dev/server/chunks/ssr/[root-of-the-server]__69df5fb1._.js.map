{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///Users/bryndalski/kodowanie/studia/front-end/src/lib/env-check.ts"],"sourcesContent":["// Debug helper - sprawdza czy zmienne Å›rodowiskowe sÄ… zaÅ‚adowane\nexport function checkEnvVariables() {\n  const requiredEnvVars = {\n    'NEXT_PUBLIC_COGNITO_USER_POOL_ID': process.env.NEXT_PUBLIC_COGNITO_USER_POOL_ID,\n    'NEXT_PUBLIC_COGNITO_CLIENT_ID': process.env.NEXT_PUBLIC_COGNITO_CLIENT_ID,\n    'NEXT_PUBLIC_COGNITO_REGION': process.env.NEXT_PUBLIC_COGNITO_REGION,\n    'NEXT_PUBLIC_API_GATEWAY_URL': process.env.NEXT_PUBLIC_API_GATEWAY_URL,\n  };\n\n  const missing: string[] = [];\n\n  Object.entries(requiredEnvVars).forEach(([key, value]) => {\n    if (!value) {\n      missing.push(key);\n    }\n  });\n\n  if (missing.length > 0) {\n    console.error('âŒ Missing environment variables:', missing);\n    console.error('Please check your .env.local file');\n    return false;\n  }\n\n  console.log('âœ… All required environment variables are set:');\n  Object.entries(requiredEnvVars).forEach(([key, value]) => {\n    // Show first and last 4 characters for security\n    const maskedValue = value!.length > 8\n      ? `${value!.substring(0, 4)}...${value!.substring(value!.length - 4)}`\n      : '****';\n    console.log(`  ${key}: ${maskedValue}`);\n  });\n\n  return true;\n}\n\n"],"names":[],"mappings":"AAAA,iEAAiE;;;;;AAC1D,SAAS;IACd,MAAM,kBAAkB;QACtB,kCAAkC;QAClC,+BAA+B;QAC/B,4BAA4B;QAC5B,6BAA6B;IAC/B;IAEA,MAAM,UAAoB,EAAE;IAE5B,OAAO,OAAO,CAAC,iBAAiB,OAAO,CAAC,CAAC,CAAC,KAAK,MAAM;QACnD,IAAI,CAAC,OAAO;YACV,QAAQ,IAAI,CAAC;QACf;IACF;IAEA,IAAI,QAAQ,MAAM,GAAG,GAAG;QACtB,QAAQ,KAAK,CAAC,oCAAoC;QAClD,QAAQ,KAAK,CAAC;QACd,OAAO;IACT;IAEA,QAAQ,GAAG,CAAC;IACZ,OAAO,OAAO,CAAC,iBAAiB,OAAO,CAAC,CAAC,CAAC,KAAK,MAAM;QACnD,gDAAgD;QAChD,MAAM,cAAc,MAAO,MAAM,GAAG,IAChC,GAAG,MAAO,SAAS,CAAC,GAAG,GAAG,GAAG,EAAE,MAAO,SAAS,CAAC,MAAO,MAAM,GAAG,IAAI,GACpE;QACJ,QAAQ,GAAG,CAAC,CAAC,EAAE,EAAE,IAAI,EAAE,EAAE,aAAa;IACxC;IAEA,OAAO;AACT"}},
    {"offset": {"line": 57, "column": 0}, "map": {"version":3,"sources":["file:///Users/bryndalski/kodowanie/studia/front-end/src/lib/amplify-config.ts"],"sourcesContent":["import { Amplify } from 'aws-amplify';\nimport { checkEnvVariables } from './env-check';\n\nconst amplifyConfig = {\n  Auth: {\n    Cognito: {\n      userPoolId: process.env.NEXT_PUBLIC_COGNITO_USER_POOL_ID!,\n      userPoolClientId: process.env.NEXT_PUBLIC_COGNITO_CLIENT_ID!,\n      region: process.env.NEXT_PUBLIC_COGNITO_REGION!,\n      signUpVerificationMethod: 'code' as const,\n      loginWith: {\n        email: true,\n      },\n    },\n  },\n};\n\nexport function configureAmplify() {\n  try {\n    // Check if environment variables are set\n    if (!checkEnvVariables()) {\n      throw new Error('Missing required environment variables');\n    }\n\n    Amplify.configure(amplifyConfig, { ssr: true });\n    console.log('âœ… Amplify configured successfully');\n  } catch (error) {\n    console.error('âŒ Error configuring Amplify:', error);\n    throw error;\n  }\n}\n\nexport default amplifyConfig;\n"],"names":[],"mappings":";;;;;;AAAA;AACA;;;AAEA,MAAM,gBAAgB;IACpB,MAAM;QACJ,SAAS;YACP,UAAU;YACV,gBAAgB;YAChB,MAAM;YACN,0BAA0B;YAC1B,WAAW;gBACT,OAAO;YACT;QACF;IACF;AACF;AAEO,SAAS;IACd,IAAI;QACF,yCAAyC;QACzC,IAAI,CAAC,IAAA,+IAAiB,KAAI;YACxB,MAAM,IAAI,MAAM;QAClB;QAEA,uNAAO,CAAC,SAAS,CAAC,eAAe;YAAE,KAAK;QAAK;QAC7C,QAAQ,GAAG,CAAC;IACd,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,gCAAgC;QAC9C,MAAM;IACR;AACF;uCAEe"}},
    {"offset": {"line": 100, "column": 0}, "map": {"version":3,"sources":["file:///Users/bryndalski/kodowanie/studia/front-end/src/contexts/AuthContext.tsx"],"sourcesContent":["'use client';\n\nimport React, { createContext, useContext, useEffect, useState } from 'react';\nimport { getCurrentUser, signOut } from 'aws-amplify/auth';\nimport { User, AuthState } from '@/types/auth';\nimport { configureAmplify } from '@/lib/amplify-config';\n\ninterface AuthContextType extends AuthState {\n  signOut: () => Promise<void>;\n  refreshAuth: () => Promise<void>;\n}\n\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\n\nexport function AuthProvider({ children }: { children: React.ReactNode }) {\n  const [state, setState] = useState<AuthState>({\n    user: null,\n    loading: true,\n    isAuthenticated: false,\n  });\n  const [isConfigured, setIsConfigured] = useState(false);\n\n  useEffect(() => {\n    // Configure Amplify once on mount\n    try {\n      configureAmplify();\n      setIsConfigured(true);\n    } catch (error) {\n      console.error('Failed to configure Amplify:', error);\n      setState({\n        user: null,\n        loading: false,\n        isAuthenticated: false,\n      });\n    }\n  }, []);\n\n  const checkAuthState = async () => {\n    if (!isConfigured) {\n      console.log('Amplify not yet configured, skipping auth check');\n      return;\n    }\n\n    try {\n      console.log('ðŸ” Checking auth state...');\n      const user = await getCurrentUser();\n\n      console.log('âœ… User found:', {\n        userId: user.userId,\n        username: user.username,\n        signInDetails: user.signInDetails\n      });\n\n      const userData: User = {\n        id: user.userId,\n        email: user.signInDetails?.loginId || user.username || '',\n        username: user.username,\n        emailVerified: true,\n      };\n\n      setState({\n        user: userData,\n        loading: false,\n        isAuthenticated: true,\n      });\n\n      console.log('âœ… Auth state updated - user is authenticated');\n    } catch (error) {\n      console.log('âŒ No authenticated user found:', error);\n      setState({\n        user: null,\n        loading: false,\n        isAuthenticated: false,\n      });\n    }\n  };\n\n  useEffect(() => {\n    if (isConfigured) {\n      checkAuthState();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isConfigured]);\n\n  const handleSignOut = async () => {\n    try {\n      await signOut();\n      setState({\n        user: null,\n        loading: false,\n        isAuthenticated: false,\n      });\n    } catch (error) {\n      console.error('Error signing out:', error);\n      // Force clear the state even if sign-out fails\n      setState({\n        user: null,\n        loading: false,\n        isAuthenticated: false,\n      });\n    }\n  };\n\n  const refreshAuth = async () => {\n    console.log('ðŸ”„ Refreshing auth state...');\n    setState(prev => ({ ...prev, loading: true }));\n    await checkAuthState();\n  };\n\n  const value: AuthContextType = {\n    ...state,\n    signOut: handleSignOut,\n    refreshAuth,\n  };\n\n  return (\n    <AuthContext.Provider value={value}>\n      {children}\n    </AuthContext.Provider>\n  );\n}\n\nexport function useAuth(): AuthContextType {\n  const context = useContext(AuthContext);\n  if (context === undefined) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n}\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AAAA;AAEA;AALA;;;;;AAYA,MAAM,4BAAc,IAAA,sNAAa,EAA8B;AAExD,SAAS,aAAa,EAAE,QAAQ,EAAiC;IACtE,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAY;QAC5C,MAAM;QACN,SAAS;QACT,iBAAiB;IACnB;IACA,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAC;IAEjD,IAAA,kNAAS,EAAC;QACR,kCAAkC;QAClC,IAAI;YACF,IAAA,mJAAgB;YAChB,gBAAgB;QAClB,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,gCAAgC;YAC9C,SAAS;gBACP,MAAM;gBACN,SAAS;gBACT,iBAAiB;YACnB;QACF;IACF,GAAG,EAAE;IAEL,MAAM,iBAAiB;QACrB,IAAI,CAAC,cAAc;YACjB,QAAQ,GAAG,CAAC;YACZ;QACF;QAEA,IAAI;YACF,QAAQ,GAAG,CAAC;YACZ,MAAM,OAAO,MAAM,IAAA,4NAAc;YAEjC,QAAQ,GAAG,CAAC,iBAAiB;gBAC3B,QAAQ,KAAK,MAAM;gBACnB,UAAU,KAAK,QAAQ;gBACvB,eAAe,KAAK,aAAa;YACnC;YAEA,MAAM,WAAiB;gBACrB,IAAI,KAAK,MAAM;gBACf,OAAO,KAAK,aAAa,EAAE,WAAW,KAAK,QAAQ,IAAI;gBACvD,UAAU,KAAK,QAAQ;gBACvB,eAAe;YACjB;YAEA,SAAS;gBACP,MAAM;gBACN,SAAS;gBACT,iBAAiB;YACnB;YAEA,QAAQ,GAAG,CAAC;QACd,EAAE,OAAO,OAAO;YACd,QAAQ,GAAG,CAAC,kCAAkC;YAC9C,SAAS;gBACP,MAAM;gBACN,SAAS;gBACT,iBAAiB;YACnB;QACF;IACF;IAEA,IAAA,kNAAS,EAAC;QACR,IAAI,cAAc;YAChB;QACF;IACA,uDAAuD;IACzD,GAAG;QAAC;KAAa;IAEjB,MAAM,gBAAgB;QACpB,IAAI;YACF,MAAM,IAAA,8MAAO;YACb,SAAS;gBACP,MAAM;gBACN,SAAS;gBACT,iBAAiB;YACnB;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,sBAAsB;YACpC,+CAA+C;YAC/C,SAAS;gBACP,MAAM;gBACN,SAAS;gBACT,iBAAiB;YACnB;QACF;IACF;IAEA,MAAM,cAAc;QAClB,QAAQ,GAAG,CAAC;QACZ,SAAS,CAAA,OAAQ,CAAC;gBAAE,GAAG,IAAI;gBAAE,SAAS;YAAK,CAAC;QAC5C,MAAM;IACR;IAEA,MAAM,QAAyB;QAC7B,GAAG,KAAK;QACR,SAAS;QACT;IACF;IAEA,qBACE,8OAAC,YAAY,QAAQ;QAAC,OAAO;kBAC1B;;;;;;AAGP;AAEO,SAAS;IACd,MAAM,UAAU,IAAA,mNAAU,EAAC;IAC3B,IAAI,YAAY,WAAW;QACzB,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT"}}]
}