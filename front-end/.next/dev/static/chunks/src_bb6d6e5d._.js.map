{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/bryndalski/kodowanie/studia/front-end/src/lib/env-check.ts"],"sourcesContent":["// Debug helper - sprawdza czy zmienne Å›rodowiskowe sÄ… zaÅ‚adowane\nexport function checkEnvVariables() {\n  const requiredEnvVars = {\n    'NEXT_PUBLIC_COGNITO_USER_POOL_ID': process.env.NEXT_PUBLIC_COGNITO_USER_POOL_ID,\n    'NEXT_PUBLIC_COGNITO_CLIENT_ID': process.env.NEXT_PUBLIC_COGNITO_CLIENT_ID,\n    'NEXT_PUBLIC_COGNITO_REGION': process.env.NEXT_PUBLIC_COGNITO_REGION,\n    'NEXT_PUBLIC_API_GATEWAY_URL': process.env.NEXT_PUBLIC_API_GATEWAY_URL,\n  };\n\n  const missing: string[] = [];\n\n  Object.entries(requiredEnvVars).forEach(([key, value]) => {\n    if (!value) {\n      missing.push(key);\n    }\n  });\n\n  if (missing.length > 0) {\n    console.error('âŒ Missing environment variables:', missing);\n    console.error('Please check your .env.local file');\n    return false;\n  }\n\n  console.log('âœ… All required environment variables are set:');\n  Object.entries(requiredEnvVars).forEach(([key, value]) => {\n    // Show first and last 4 characters for security\n    const maskedValue = value!.length > 8\n      ? `${value!.substring(0, 4)}...${value!.substring(value!.length - 4)}`\n      : '****';\n    console.log(`  ${key}: ${maskedValue}`);\n  });\n\n  return true;\n}\n\n"],"names":[],"mappings":"AAAA,iEAAiE;;;;;AAGzB;AAFjC,SAAS;IACd,MAAM,kBAAkB;QACtB,kCAAkC;QAClC,+BAA+B;QAC/B,4BAA4B;QAC5B,6BAA6B;IAC/B;IAEA,MAAM,UAAoB,EAAE;IAE5B,OAAO,OAAO,CAAC,iBAAiB,OAAO,CAAC,CAAC,CAAC,KAAK,MAAM;QACnD,IAAI,CAAC,OAAO;YACV,QAAQ,IAAI,CAAC;QACf;IACF;IAEA,IAAI,QAAQ,MAAM,GAAG,GAAG;QACtB,QAAQ,KAAK,CAAC,oCAAoC;QAClD,QAAQ,KAAK,CAAC;QACd,OAAO;IACT;IAEA,QAAQ,GAAG,CAAC;IACZ,OAAO,OAAO,CAAC,iBAAiB,OAAO,CAAC,CAAC,CAAC,KAAK,MAAM;QACnD,gDAAgD;QAChD,MAAM,cAAc,MAAO,MAAM,GAAG,IAChC,GAAG,MAAO,SAAS,CAAC,GAAG,GAAG,GAAG,EAAE,MAAO,SAAS,CAAC,MAAO,MAAM,GAAG,IAAI,GACpE;QACJ,QAAQ,GAAG,CAAC,CAAC,EAAE,EAAE,IAAI,EAAE,EAAE,aAAa;IACxC;IAEA,OAAO;AACT"}},
    {"offset": {"line": 43, "column": 0}, "map": {"version":3,"sources":["file:///Users/bryndalski/kodowanie/studia/front-end/src/lib/amplify-config.ts"],"sourcesContent":["import { Amplify } from 'aws-amplify';\nimport { checkEnvVariables } from './env-check';\n\nconst amplifyConfig = {\n  Auth: {\n    Cognito: {\n      userPoolId: process.env.NEXT_PUBLIC_COGNITO_USER_POOL_ID!,\n      userPoolClientId: process.env.NEXT_PUBLIC_COGNITO_CLIENT_ID!,\n      region: process.env.NEXT_PUBLIC_COGNITO_REGION!,\n      signUpVerificationMethod: 'code' as const,\n      loginWith: {\n        email: true,\n      },\n    },\n  },\n};\n\nexport function configureAmplify() {\n  try {\n    // Check if environment variables are set\n    if (!checkEnvVariables()) {\n      throw new Error('Missing required environment variables');\n    }\n\n    Amplify.configure(amplifyConfig, { ssr: true });\n    console.log('âœ… Amplify configured successfully');\n  } catch (error) {\n    console.error('âŒ Error configuring Amplify:', error);\n    throw error;\n  }\n}\n\nexport default amplifyConfig;\n"],"names":[],"mappings":";;;;;;AAMkB;AANlB;AACA;;;AAEA,MAAM,gBAAgB;IACpB,MAAM;QACJ,SAAS;YACP,UAAU;YACV,gBAAgB;YAChB,MAAM;YACN,0BAA0B;YAC1B,WAAW;gBACT,OAAO;YACT;QACF;IACF;AACF;AAEO,SAAS;IACd,IAAI;QACF,yCAAyC;QACzC,IAAI,CAAC,IAAA,kJAAiB,KAAI;YACxB,MAAM,IAAI,MAAM;QAClB;QAEA,0NAAO,CAAC,SAAS,CAAC,eAAe;YAAE,KAAK;QAAK;QAC7C,QAAQ,GAAG,CAAC;IACd,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,gCAAgC;QAC9C,MAAM;IACR;AACF;uCAEe"}},
    {"offset": {"line": 90, "column": 0}, "map": {"version":3,"sources":["file:///Users/bryndalski/kodowanie/studia/front-end/src/contexts/AuthContext.tsx"],"sourcesContent":["'use client';\n\nimport React, { createContext, useContext, useEffect, useState } from 'react';\nimport { getCurrentUser, signOut } from 'aws-amplify/auth';\nimport { User, AuthState } from '@/types/auth';\nimport { configureAmplify } from '@/lib/amplify-config';\n\ninterface AuthContextType extends AuthState {\n  signOut: () => Promise<void>;\n  refreshAuth: () => Promise<void>;\n}\n\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\n\nexport function AuthProvider({ children }: { children: React.ReactNode }) {\n  const [state, setState] = useState<AuthState>({\n    user: null,\n    loading: true,\n    isAuthenticated: false,\n  });\n  const [isConfigured, setIsConfigured] = useState(false);\n\n  useEffect(() => {\n    // Configure Amplify once on mount\n    try {\n      configureAmplify();\n      setIsConfigured(true);\n    } catch (error) {\n      console.error('Failed to configure Amplify:', error);\n      setState({\n        user: null,\n        loading: false,\n        isAuthenticated: false,\n      });\n    }\n  }, []);\n\n  const checkAuthState = async () => {\n    if (!isConfigured) {\n      console.log('Amplify not yet configured, skipping auth check');\n      return;\n    }\n\n    try {\n      console.log('ðŸ” Checking auth state...');\n      const user = await getCurrentUser();\n\n      console.log('âœ… User found:', {\n        userId: user.userId,\n        username: user.username,\n        signInDetails: user.signInDetails\n      });\n\n      const userData: User = {\n        id: user.userId,\n        email: user.signInDetails?.loginId || user.username || '',\n        username: user.username,\n        emailVerified: true,\n      };\n\n      setState({\n        user: userData,\n        loading: false,\n        isAuthenticated: true,\n      });\n\n      console.log('âœ… Auth state updated - user is authenticated');\n    } catch (error) {\n      console.log('âŒ No authenticated user found:', error);\n      setState({\n        user: null,\n        loading: false,\n        isAuthenticated: false,\n      });\n    }\n  };\n\n  useEffect(() => {\n    if (isConfigured) {\n      checkAuthState();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isConfigured]);\n\n  const handleSignOut = async () => {\n    try {\n      await signOut();\n      setState({\n        user: null,\n        loading: false,\n        isAuthenticated: false,\n      });\n    } catch (error) {\n      console.error('Error signing out:', error);\n      // Force clear the state even if sign-out fails\n      setState({\n        user: null,\n        loading: false,\n        isAuthenticated: false,\n      });\n    }\n  };\n\n  const refreshAuth = async () => {\n    console.log('ðŸ”„ Refreshing auth state...');\n    setState(prev => ({ ...prev, loading: true }));\n    await checkAuthState();\n  };\n\n  const value: AuthContextType = {\n    ...state,\n    signOut: handleSignOut,\n    refreshAuth,\n  };\n\n  return (\n    <AuthContext.Provider value={value}>\n      {children}\n    </AuthContext.Provider>\n  );\n}\n\nexport function useAuth(): AuthContextType {\n  const context = useContext(AuthContext);\n  if (context === undefined) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n}\n"],"names":["c","_c","React","createContext","useContext","useEffect","useState","getCurrentUser","signOut","User","AuthState","configureAmplify","AuthContextType","Promise","refreshAuth","AuthContext","undefined","AuthProvider","children","ReactNode","state","setState","user","loading","isAuthenticated","isConfigured","setIsConfigured","error","console","checkAuthState","log","userId","username","signInDetails","userData","id","email","loginId","emailVerified","handleSignOut","prev","value","useAuth","$","$i","Symbol","for","context","Error"],"mappings":"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","ignoreList":[]}}]
}